<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>

	body {
		height: 1000px;
		width: 1000px;
		background: mistyrose;
		position: relative;
		z-index: -3;
	}
	.grayBlockStyle {
		margin: 0;
		width: 1000px;
		height: 1000px;
		background: rgba(112, 112, 112, 0.5);
		position: relative;
		z-index: 2;
		top: -200px;
	}
	.msgStyle {
		z-index: 3;
		margin: auto;
		background-color: honeydew;
		border: 2px solid black;
		width: 220px;
		height: 200px;
		position: fixed;
		top: 50px;
		left: 350px;
		padding: 15px;
	}
	button {
		margin-top: 10px;
		margin-right: 5px;
	}

	</style>
</head>
<body>
	
	<p>Вхід</p>
	<input id="login" type="text" value='login'>
	<input id='password' type="password" value='password'>
	<button id="buttonEnter" type="submit">enter</button>
	<br><br>
	<p>Реєстрація</p>
	<button id="buttonRegistration" type="submit">registration</button>
	
	<script>
	
let users = [{
	login: 'user1',
	password: 'aaa1'
}, {
	login: 'user2',
	password: 'aaa2'
}, {
	login: 'user3',
	password: 'aaa3'
}];
localStorage.setItem('users', JSON.stringify(users));
let obj = JSON.parse(localStorage.getItem('users'));
let log = document.getElementById('login');
let pass = document.getElementById('password');
let button = document.getElementById('button');
log.onclick = clear;
pass.onclick = clear;

function clear() {
	this.value = "";
}
buttonEnter.onclick = function() {
	let userLog = log.value;
	let userPass = pass.value;
	let flag = false;
	for (let i = 0; i < obj.length; i++) {
		if (typeof obj[i] === 'object') {
			obj = obj[i];
			for (let key in obj) {
				if (userLog == obj['login'] && userPass == obj['password']) {
					flag = true;
					break;
				}
			}
		}
	}
	if (flag === true) {
		alert('Wellcome');
	} else {
		alert('Goodbye');
	}
}
// Фон
let grayBlock = document.createElement('div');
grayBlock.className = 'grayBlockStyle';
document.body.appendChild(grayBlock);
grayBlock.style = 'visibility: hidden';
//Алерт
let msg = document.createElement('div');
document.body.appendChild(msg);
msg.className = 'msgStyle';
msg.style = 'display: none';
// Text1
let txtMsg1 = document.createElement('p');
msg.appendChild(txtMsg1);
let textMsg1Content = document.createTextNode('Придумайте логін');
txtMsg1.appendChild(textMsg1Content);
//Поле для вводу1
let input1 = document.createElement('input');
msg.appendChild(input1);
let br = document.createElement('br');
msg.appendChild(br);
input1.type = 'text';
// Text2
let txtMsg2 = document.createElement('p');
msg.appendChild(txtMsg2);
let textMsg2Content = document.createTextNode('Придумайте пароль');
txtMsg2.appendChild(textMsg2Content);
//Поле для вводу2
let input2 = document.createElement('input');
msg.appendChild(input2);
let br2 = document.createElement('br');
msg.appendChild(br2);
input2.type = 'text';
//Кнопка ОК
let buttonOk = document.createElement('button');
let txtOkButton = document.createTextNode('Зареєструватися');
buttonOk.appendChild(txtOkButton);
input1.parentNode.appendChild(buttonOk);
//Кнопка Скасувати
let buttonEsc = document.createElement('button');
let txtEscButton = document.createTextNode('Відмінити');
buttonEsc.appendChild(txtEscButton);
input1.parentNode.appendChild(buttonEsc);

function showForm() {
	grayBlock.style = 'visibility: visible';
	buttonEnter.disabled = true;
	buttonRegistration.disabled = true;
	msg.style = 'display: block';
	input1.focus();
}
let buttonRegistration = document.getElementById('buttonRegistration');
buttonRegistration.onclick = showForm;
buttonOk.onclick = registr;

function registr() {
	if ((input1.value && input2.value) != '') {
		let newObj = { login: input1.value, password: input2.value };
		let json2 = JSON.stringify(newObj);
		localStorage.setItem('newObj', json2);
		escp();
		console.log(users);
		console.log(obj);
	} else {
		alert('Проявіть фантазію. Спробуйте ще раз.')
	}
}
buttonEsc.onclick = escp;

function escp() {
	msg.style = 'display: none';
	buttonEnter.disabled = false;
	buttonRegistration.disabled = false;
	grayBlock.style = 'visibility: hidden';
}

	</script>
</body>
</html>
